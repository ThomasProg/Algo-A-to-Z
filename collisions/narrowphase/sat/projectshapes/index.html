<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.108.0"><meta name=generator content="Relearn 5.8.1+tip"><meta name=description content><title>Projecting Shapes :: Documentation for Hugo Learn Theme</title><link href=../../../../collisions/narrowphase/sat/projectshapes/index.xml rel=alternate type=application/rss+xml title="Projecting Shapes :: Documentation for Hugo Learn Theme"><link href=../../../../images/favicon.png?1671583805 rel=icon type=image/png><link href=../../../../css/fontawesome-all.min.css?1671583805 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../../css/fontawesome-all.min.css?1671583805 rel=stylesheet></noscript><link href=../../../../css/featherlight.min.css?1671583805 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../../css/featherlight.min.css?1671583805 rel=stylesheet></noscript><link href=../../../../css/auto-complete.css?1671583805 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../../css/auto-complete.css?1671583805 rel=stylesheet></noscript><link href=../../../../css/perfect-scrollbar.min.css?1671583805 rel=stylesheet><link href=../../../../css/nucleus.css?1671583805 rel=stylesheet><link href=../../../../css/fonts.css?1671583805 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../../css/fonts.css?1671583805 rel=stylesheet></noscript><link href=../../../../css/theme.css?1671583805 rel=stylesheet><link href=../../../../css/theme-light-theme.css?1671583805 rel=stylesheet id=variant-style><link href=../../../../css/ie.css?1671583805 rel=stylesheet><link href=../../../../css/variant.css?1671583805 rel=stylesheet><link href=../../../../css/print.css?1671583805 rel=stylesheet media=print><script src=../../../../js/url.js?1671583805></script>
<script src=../../../../js/variant.js?1671583805></script>
<script>window.index_json_url="../../../../index.json",window.index_js_url="../../../../index.search.js";var root_url="../../../../",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",window.T_No_results_found="No results found for \u0022{0}\u0022",window.T_N_results_found="{1} results found for \u0022{0}\u0022",baseUriFull="https://thomasprog.github.io/Algo-A-to-Z/",window.variants&&variants.init(["light-theme","dark-theme","neon-theme"])</script><script src=../../../../js/jquery.min.js?1671583805 defer></script></head><body class="mobile-support html" data-url=../../../../collisions/narrowphase/sat/projectshapes/index.html><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable dir=ltr><div><div class=navigation><a class="nav nav-next" href=../../../../collisions/narrowphase/sat/gettingoutputdata/index.html title="Getting output data (&#129106;)"><i class="fas fa-chevron-right fa-fw"></i></a></div><div class=navigation><a class="nav nav-prev" href=../../../../collisions/narrowphase/sat/getprojectionaxes/index.html title="Get Projection Axes (&#129104;)"><i class="fas fa-chevron-left fa-fw"></i></a></div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a></span>
<span id=toc-menu title='Table of Contents (CTRL+ALT+t)'><i class="fas fa-list-alt fa-fw"></i></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../../collisions/narrowphase/sat/index.html><span itemprop=name>SAT</span></a><meta itemprop=position content="1">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Projecting Shapes</span><meta itemprop=position content="2"></li></ol></div><div class="default-animation progress"><div class=toc-wrapper dir=ltr><nav id=TableOfContents><ul><li><a href=#projecting-a-point>Projecting a point</a><ul><li><a href=#2d-dot-product>2D Dot Product</a></li><li><a href=#3d-dot-product>3D Dot Product</a></li><li><a href=#dot-product-generalization>Dot Product Generalization</a></li></ul></li><li><a href=#projecting-a-circle-sphere-or-hypersphere>Projecting a circle, sphere, or hypersphere</a></li><li><a href=#projecting-a-polygon>Projecting a polygon</a></li><li><a href=#projecting-a-2d-convex-polygon>Projecting a 2D convex polygon</a><ul><li><a href=#the-extremum-properties>The extremum properties</a></li><li><a href=#dichotomy>Dichotomy</a></li><li><a href=#examples->Examples :</a></li><li><a href=#projecting-an-arbitrary-2d-shape>Projecting an arbitrary 2D shape</a></li></ul></li></ul></nav></div></div></div></nav><main id=body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><div id=head-tags></div><article class=default><h1 id=projecting-shapes>Projecting Shapes</h1><h2 id=projecting-a-point>Projecting a point
<a href=#projecting-a-point></a> <a id=chapter-1></a></h2><p>The dot product can be used to project a point on an axis.<div class=tab-panel><div class=tab-nav><button data-tab-item=Python data-tab-group=default class="tab-nav-button direction-ltr active" onclick='switchTab("default","Python")'><span>Python</span></button></div><div class=tab-content><div data-tab-item=Python data-tab-group=default class="tab-item active"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>ProjectPointOnAxis</span>(point, axis) <span style=color:#f92672>-&gt;</span> float:
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> DotProduct(point, axis);
</span></span></code></pre></div></div></div></div></p><h3 id=2d-dot-product>2D Dot Product
<a href=#2d-dot-product></a> <a id=chapter-1></a></h3><div class=tab-panel><div class=tab-nav><button data-tab-item=Python data-tab-group=default class="tab-nav-button direction-ltr active" onclick='switchTab("default","Python")'><span>Python</span></button></div><div class=tab-content><div data-tab-item=Python data-tab-group=default class="tab-item active"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>DotProduct</span>(v1, v2) <span style=color:#f92672>-&gt;</span> float:
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> v1<span style=color:#f92672>.</span>x <span style=color:#f92672>*</span> v2<span style=color:#f92672>.</span>x <span style=color:#f92672>+</span> v1<span style=color:#f92672>.</span>y <span style=color:#f92672>*</span> v2<span style=color:#f92672>.</span>y
</span></span></code></pre></div></div></div></div><h3 id=3d-dot-product>3D Dot Product
<a href=#3d-dot-product></a> <a id=chapter-1></a></h3><div class=tab-panel><div class=tab-nav><button data-tab-item=Python data-tab-group=default class="tab-nav-button direction-ltr active" onclick='switchTab("default","Python")'><span>Python</span></button></div><div class=tab-content><div data-tab-item=Python data-tab-group=default class="tab-item active"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>DotProduct</span>(v1, v2) <span style=color:#f92672>-&gt;</span> float:
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> v1<span style=color:#f92672>.</span>x <span style=color:#f92672>*</span> v2<span style=color:#f92672>.</span>x <span style=color:#f92672>+</span> v1<span style=color:#f92672>.</span>y <span style=color:#f92672>*</span> v2<span style=color:#f92672>.</span>y <span style=color:#f92672>+</span> v1<span style=color:#f92672>.</span>z <span style=color:#f92672>*</span> v2<span style=color:#f92672>.</span>z
</span></span></code></pre></div></div></div></div><h3 id=dot-product-generalization>Dot Product Generalization
<a href=#dot-product-generalization></a> <a id=chapter-1></a></h3><div class=tab-panel><div class=tab-nav><button data-tab-item=Python data-tab-group=default class="tab-nav-button direction-ltr active" onclick='switchTab("default","Python")'><span>Python</span></button></div><div class=tab-content><div data-tab-item=Python data-tab-group=default class="tab-item active"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>DotProduct</span>(v1, v2) <span style=color:#f92672>-&gt;</span> float:
</span></span><span style=display:flex><span>  nbDimensions <span style=color:#f92672>=</span> v1<span style=color:#f92672>.</span>GetDimension()
</span></span><span style=display:flex><span>  total <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(nbDimensions):
</span></span><span style=display:flex><span>    total <span style=color:#f92672>+=</span> v1<span style=color:#f92672>.</span>coords[i] <span style=color:#f92672>*</span> v2<span style=color:#f92672>.</span>coords[i]
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> total
</span></span></code></pre></div></div></div></div><h2 id=projecting-a-circle-sphere-or-hypersphere>Projecting a circle, sphere, or hypersphere
<a href=#projecting-a-circle-sphere-or-hypersphere></a> <a id=chapter-1></a></h2><p>To simulate an hypersphere, we usually make models with a lot of triangles and vertices.<br>This is one of the best ways we know to render hyperspheres with other objects.<br>However, for collisions, we do not need this representation, since it only makes the performance worse.<br>Instead, we can just use the mathematical properties of the hypersphere and have O(1) performance.</p><div class=tab-panel><div class=tab-nav><button data-tab-item=Python data-tab-group=default class="tab-nav-button direction-ltr active" onclick='switchTab("default","Python")'><span>Python</span></button></div><div class=tab-content><div data-tab-item=Python data-tab-group=default class="tab-item active"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>ProjectSphereOnAxis</span>(hyperSphere: HyperSphere, axis: Vector) <span style=color:#f92672>-&gt;</span> Range:
</span></span><span style=display:flex><span>    centerProj <span style=color:#f92672>=</span> ProjectPointOnAxis(hyperSphere<span style=color:#f92672>.</span>center, axis<span style=color:#f92672>.</span>normalized())
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    range <span style=color:#f92672>=</span> new Range()
</span></span><span style=display:flex><span>    range<span style=color:#f92672>.</span>min <span style=color:#f92672>=</span> centerProj <span style=color:#f92672>-</span> hyperSphere<span style=color:#f92672>.</span>radius
</span></span><span style=display:flex><span>    range<span style=color:#f92672>.</span>max <span style=color:#f92672>=</span> centerProj <span style=color:#f92672>+</span> hyperSphere<span style=color:#f92672>.</span>radius
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> range
</span></span></code></pre></div></div></div></div><h2 id=projecting-a-polygon>Projecting a polygon
<a href=#projecting-a-polygon></a> <a id=chapter-1></a></h2><p>Mostly used shapes are models composed of vertices.<br>The projection of all the points of an edge is equal to the range of the projection of its two vertices.</p><div class=tab-panel><div class=tab-nav><button data-tab-item=Python data-tab-group=default class="tab-nav-button direction-ltr active" onclick='switchTab("default","Python")'><span>Python</span></button></div><div class=tab-content><div data-tab-item=Python data-tab-group=default class="tab-item active"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>ProjectShapeOnAxis</span>(shape: Shape, axis: Vector) <span style=color:#f92672>-&gt;</span> Range:
</span></span><span style=display:flex><span>    range <span style=color:#f92672>=</span> new Range()    
</span></span><span style=display:flex><span>    range<span style=color:#f92672>.</span>min <span style=color:#f92672>=</span> Math<span style=color:#f92672>.</span>max()
</span></span><span style=display:flex><span>    range<span style=color:#f92672>.</span>max <span style=color:#f92672>=</span> Math<span style=color:#f92672>.</span>min()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> vertex <span style=color:#f92672>in</span> shape<span style=color:#f92672>.</span>vertices:
</span></span><span style=display:flex><span>        proj <span style=color:#f92672>=</span> ProjectPointOnAxis(vertex, axis)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (proj <span style=color:#f92672>&lt;</span> range<span style=color:#f92672>.</span>min):
</span></span><span style=display:flex><span>            range<span style=color:#f92672>.</span>min <span style=color:#f92672>=</span> proj
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (proj <span style=color:#f92672>&gt;</span> range<span style=color:#f92672>.</span>max):
</span></span><span style=display:flex><span>            range<span style=color:#f92672>.</span>max <span style=color:#f92672>=</span> proj
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> range
</span></span></code></pre></div></div></div></div><h2 id=projecting-a-2d-convex-polygon>Projecting a 2D convex polygon
<a href=#projecting-a-2d-convex-polygon></a> <a id=chapter-1></a></h2><h3 id=the-extremum-properties>The extremum properties
<a href=#the-extremum-properties></a> <a id=chapter-1></a></h3><h4 id=definitions>Definitions
<a href=#definitions></a> <a id=chapter-1></a></h4><p>Let S(t) be the parametric equation of a convex shape.\
It returns a point of the shape for a given t.</p><p>Let P(t) = DotProduct(S(t), axis).<br>P(t) is the projection of the points of that shape on a given axis.</p><p>Example :<br>S(t) = r * cos(t) * i + r * sin(t) * j<br>S(t) represents a circle with a radius of r, centered around the origin.</p><h4 id=properties-of-st>Properties of S(t)
<a href=#properties-of-st></a> <a id=chapter-1></a></h4><div class=tab-panel><div class=tab-nav><button data-tab-item=Continuous data-tab-group=Continuous1 class="tab-nav-button direction-ltr active" onclick='switchTab("Continuous1","Continuous")'><span>Continuous</span></button>
<button data-tab-item=Periodic data-tab-group=Continuous1 class="tab-nav-button direction-ltr" onclick='switchTab("Continuous1","Periodic")'><span>Periodic</span></button></div><div class=tab-content><div data-tab-item=Continuous data-tab-group=Continuous1 class="tab-item active"><p>S(t) represents a closed set, so S(t) is continuous.</p></div><div data-tab-item=Periodic data-tab-group=Continuous1 class=tab-item><p>S(t) represents a closed set, so S(t) is periodic.</p><p>i.e. : if we choose a point and follow the line, we end up looping and coming back to that first point.</p></div></div></div><h4 id=properties-of-pt>Properties of P(t)
<a href=#properties-of-pt></a> <a id=chapter-1></a></h4><div class=tab-panel><div class=tab-nav><button data-tab-item=Continuous data-tab-group=Continuous2 class="tab-nav-button direction-ltr active" onclick='switchTab("Continuous2","Continuous")'><span>Continuous</span></button>
<button data-tab-item=Periodic data-tab-group=Continuous2 class="tab-nav-button direction-ltr" onclick='switchTab("Continuous2","Periodic")'><span>Periodic</span></button>
<button data-tab-item=Maximum data-tab-group=Continuous2 class="tab-nav-button direction-ltr" onclick='switchTab("Continuous2","Maximum")'><span>Maximum</span></button>
<button data-tab-item=Minimum data-tab-group=Continuous2 class="tab-nav-button direction-ltr" onclick='switchTab("Continuous2","Minimum")'><span>Minimum</span></button></div><div class=tab-content><div data-tab-item=Continuous data-tab-group=Continuous2 class="tab-item active"><p>P(t) = DotProduct(S(t), axis).</p><p>S(t) is continuous. DotProduct is a continuous map.</p><p>So P(t) is continuous.</p></div><div data-tab-item=Periodic data-tab-group=Continuous2 class=tab-item><p>P(t) = DotProduct(S(t), axis).</p><p>S(t) is periodic, and axis is constant.</p><p>So P(t) is periodic too, with the same period as S(t).</p></div><div data-tab-item=Maximum data-tab-group=Continuous2 class=tab-item><p>Every local maximum of P(t) is equal to the maximum of P(t).</p></div><div data-tab-item=Minimum data-tab-group=Continuous2 class=tab-item><p>Every local minimum of P(t) is equal to the minimum of P(t).</p></div></div></div><h3 id=dichotomy>Dichotomy
<a href=#dichotomy></a> <a id=chapter-1></a></h3><p>As we saw before, once we find the extremum, we do not have to test the other vertices anymore.</p><p>The projections are also continuous, and there are only 2 extremums, so:</p><div class=tab-panel><div class=tab-nav><button data-tab-item=Python data-tab-group=default class="tab-nav-button direction-ltr active" onclick='switchTab("default","Python")'><span>Python</span></button></div><div class=tab-content><div data-tab-item=Python data-tab-group=default class="tab-item active"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Algorithm created by myself, and proud of it, hehe</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>NextIndex</span>(shape, index):
</span></span><span style=display:flex><span>  size <span style=color:#f92672>=</span> len(shape<span style=color:#f92672>.</span>vertices)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (index <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>%</span> size
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>PrevIndex</span>(shape, index):
</span></span><span style=display:flex><span>  size <span style=color:#f92672>=</span> len(shape<span style=color:#f92672>.</span>vertices)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (index <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> size) <span style=color:#f92672>%</span> size
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>GetMiddleIndex</span>(shape, id1, id2):
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (id1 <span style=color:#f92672>&lt;</span> id2):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (id1 <span style=color:#f92672>+</span> id2) <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>    size <span style=color:#f92672>=</span> len(shape<span style=color:#f92672>.</span>vertices)
</span></span><span style=display:flex><span>    dist <span style=color:#f92672>=</span> size <span style=color:#f92672>-</span> (id1 <span style=color:#f92672>-</span> id2)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (id1 <span style=color:#f92672>+</span> dist <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>) <span style=color:#f92672>%</span> size
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>IsSmallerClockwise</span>(shape, axis, index):
</span></span><span style=display:flex><span>  p <span style=color:#f92672>=</span> ProjectPointOnAxis(shape<span style=color:#f92672>.</span>vertices[index], axis)
</span></span><span style=display:flex><span>  pNext <span style=color:#f92672>=</span> ProjectPointOnAxis(shape<span style=color:#f92672>.</span>vertices[NextIndex(shape, index)], axis)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> pNext <span style=color:#f92672>&lt;</span> p
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>IsSmallerAntiClockwise</span>(shape, axis, index):
</span></span><span style=display:flex><span>  p <span style=color:#f92672>=</span> ProjectPointOnAxis(shape<span style=color:#f92672>.</span>vertices[index], axis)
</span></span><span style=display:flex><span>  pPrev <span style=color:#f92672>=</span> ProjectPointOnAxis(shape<span style=color:#f92672>.</span>vertices[PrevIndex(shape, index)], axis)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> pPrev <span style=color:#f92672>&lt;</span> p
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># This function is tail recursive, so the compiler can optimize it out</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>SearchMinProjectionOnAxis</span>(shape: Shape, axis: Vector, minIndex, maxIndex) <span style=color:#f92672>-&gt;</span> float:
</span></span><span style=display:flex><span>    interval <span style=color:#f92672>=</span> maxIndex <span style=color:#f92672>-</span> minIndex
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    i1 <span style=color:#f92672>=</span> minIndex
</span></span><span style=display:flex><span>    i2 <span style=color:#f92672>=</span> GetMiddleIndex(shape, minIndex, maxIndex) <span style=color:#75715e># half</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    v1 <span style=color:#f92672>=</span> shape<span style=color:#f92672>.</span>vertices[i1]
</span></span><span style=display:flex><span>    v2 <span style=color:#f92672>=</span> shape<span style=color:#f92672>.</span>vertices[i2]
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    p1 <span style=color:#f92672>=</span> ProjectPointOnAxis(v1, axis)
</span></span><span style=display:flex><span>    p2 <span style=color:#f92672>=</span> ProjectPointOnAxis(v2, axis)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (p1 <span style=color:#f92672>&lt;</span> p2):
</span></span><span style=display:flex><span>      <span style=color:#75715e># Go in the direction of p1</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (IsSmallerClockwise(shape, axis, i1)):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> SearchMinProjectionOnAxis(shape, axis, i1, i2) <span style=color:#75715e># clockwise</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (IsSmallerAntiClockwise(shape, axis, i1)):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> SearchMinProjectionOnAxis(shape, axis, i2, i1) <span style=color:#75715e># anti clockwise</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># else, already at the end</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> p1
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>elif</span> (p2 <span style=color:#f92672>&lt;</span> p1):
</span></span><span style=display:flex><span>      <span style=color:#75715e># Go in the direction of p2</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (IsSmallerClockwise(shape, axis, i2)):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> SearchMinProjectionOnAxis(shape, axis, i2, i1) <span style=color:#75715e># clockwise</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (IsSmallerAntiClockwise(shape, axis, i2, i1)): 
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> SearchMinProjectionOnAxis(shape, axis, i1, i2) <span style=color:#75715e># anti clockwise</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># else, already at the end</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> p2 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># The same algorithm can be used to find the maximum projection.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Cases where projections are equal are not checked, but have to be and can be.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># This program is not optimized, but has for goal to describe how the algorithm works.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>ProjectShapeOnAxis</span>(shape: Shape, axis: Vector) <span style=color:#f92672>-&gt;</span> Range:
</span></span><span style=display:flex><span>    range <span style=color:#f92672>=</span> new Range()    
</span></span><span style=display:flex><span>    range<span style=color:#f92672>.</span>min <span style=color:#f92672>=</span> SearchMinProjectionOnAxis(shape, axis, <span style=color:#ae81ff>0</span>, len(shape<span style=color:#f92672>.</span>vertices))
</span></span><span style=display:flex><span>    range<span style=color:#f92672>.</span>max <span style=color:#f92672>=</span> SearchMaxProjectionOnAxis(shape, axis, <span style=color:#ae81ff>0</span>, len(shape<span style=color:#f92672>.</span>vertices))
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> range
</span></span></code></pre></div></div></div></div><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Info</div><div class=box-content><p>This algorithm is very optimized for a high number of vertices.
However, in practice, there are only a few games that have that many vertices in 2D.
Due to the different checks, this algorithm is sure to be less optimized for a few amount of vertices.</p></div></div><h3 id=examples->Examples :
<a href=#examples-></a> <a id=chapter-1></a></h3><div style=display:flex;flex-direction:row;justify-content:center><div style=width:100%><p><a href=../../../../collisions/narrowphase/sat/projectshapes/Step1.png data-featherlight=image><img src=../../../../collisions/narrowphase/sat/projectshapes/Step1.png alt=Schema title="A convex shape, with a first and a last vertex" style=height:auto;width:auto loading=lazy><figcaption style=text-align:center><div>A convex shape, with a first and a last vertex</div></figcaption></a></p></div><div style=width:100%><p><a href=../../../../collisions/narrowphase/sat/projectshapes/Step2.png data-featherlight=image><img src=../../../../collisions/narrowphase/sat/projectshapes/Step2.png alt=Schema title="A vertex is chosen. There are as many vertices on the right as on the left" style=height:auto;width:auto loading=lazy><figcaption style=text-align:center><div>A vertex is chosen. There are as many vertices on the right as on the left</div></figcaption></a></p></div><div style=width:100%><p><a href=../../../../collisions/narrowphase/sat/projectshapes/Step3.png data-featherlight=image><img src=../../../../collisions/narrowphase/sat/projectshapes/Step3.png alt=Schema title="We project the first vertex and the chosen vertex on the axis" style=height:auto;width:auto loading=lazy><figcaption style=text-align:center><div>We project the first vertex and the chosen vertex on the axis</div></figcaption></a></p></div><div style=width:100%><p><a href=../../../../collisions/narrowphase/sat/projectshapes/Step4.png data-featherlight=image><img src=../../../../collisions/narrowphase/sat/projectshapes/Step4.png alt=Schema title="We select the vertex with the minimum projection, and evaluate in which direction the real minimum projection is" style=height:auto;width:auto loading=lazy><figcaption style=text-align:center><div>We select the vertex with the minimum projection, and evaluate in which direction the real minimum projection is</div></figcaption></a></p></div><div style=width:100%><p><a href=../../../../collisions/narrowphase/sat/projectshapes/Step5.png data-featherlight=image><img src=../../../../collisions/narrowphase/sat/projectshapes/Step5.png alt=Schema title="We take the part of the circle between the first vertex and the chosen vertex that is in the direction of the minimum" style=height:auto;width:auto loading=lazy><figcaption style=text-align:center><div>We take the part of the circle between the first vertex and the chosen vertex that is in the direction of the minimum</div></figcaption></a></p></div><div style=width:100%><p><a href=../../../../collisions/narrowphase/sat/projectshapes/Step6.png data-featherlight=image><img src=../../../../collisions/narrowphase/sat/projectshapes/Step6.png alt=Schema title="We repeat the algorithm, with the chosen vertex being the new last one" style=height:auto;width:auto loading=lazy><figcaption style=text-align:center><div>We repeat the algorithm, with the chosen vertex being the new last one</div></figcaption></a></p></div></div><div style=display:flex;flex-direction:row;justify-content:center><div style=width:100%><p><a href=../../../../collisions/narrowphase/sat/projectshapes/eStep1.png data-featherlight=image><img src=../../../../collisions/narrowphase/sat/projectshapes/eStep1.png alt=Schema title="A convex shape, that has a lot of vertices at one place" style=height:auto;width:auto loading=lazy><figcaption style=text-align:center><div>A convex shape, that has a lot of vertices at one place</div></figcaption></a></p></div><div style=width:100%><p><a href=../../../../collisions/narrowphase/sat/projectshapes/eStep2.png data-featherlight=image><img src=../../../../collisions/narrowphase/sat/projectshapes/eStep2.png alt=Schema title="We project the vertices ; the chosen vertex has the minimal projection" style=height:auto;width:auto loading=lazy><figcaption style=text-align:center><div>We project the vertices ; the chosen vertex has the minimal projection</div></figcaption></a></p></div><div style=width:100%><p><a href=../../../../collisions/narrowphase/sat/projectshapes/eStep3.png data-featherlight=image><img src=../../../../collisions/narrowphase/sat/projectshapes/eStep3.png alt=Schema title="We compute the direction of the real minimal projection" style=height:auto;width:auto loading=lazy><figcaption style=text-align:center><div>We compute the direction of the real minimal projection</div></figcaption></a></p></div><div style=width:100%><p><a href=../../../../collisions/narrowphase/sat/projectshapes/eStep4.png data-featherlight=image><img src=../../../../collisions/narrowphase/sat/projectshapes/eStep4.png alt=Schema title="We keep the part of the circle that was in that direction, and repeat" style=height:auto;width:auto loading=lazy><figcaption style=text-align:center><div>We keep the part of the circle that was in that direction, and repeat</div></figcaption></a></p></div></div><h3 id=projecting-an-arbitrary-2d-shape>Projecting an arbitrary 2D shape
<a href=#projecting-an-arbitrary-2d-shape></a> <a id=chapter-1></a></h3><h4 id=the-brute-force-way>The brute force way
<a href=#the-brute-force-way></a> <a id=chapter-1></a></h4><p>An arbitrary shape can be constructed with the function S(t), described above.<br>The brute force way of projecting the shape is just to project every point returned by that function.<br>Of course, it is impossible to project every point.<br>That is why we set a precision.</p><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Info</div><div class=box-content><p>This method does not return the exact projection of the shape, but it is the best we can do without any more precisions on the shape.
The performance is also horrible for what it is.</p></div></div><div class=tab-panel><div class=tab-nav><button data-tab-item=Python data-tab-group=default class="tab-nav-button direction-ltr active" onclick='switchTab("default","Python")'><span>Python</span></button></div><div class=tab-content><div data-tab-item=Python data-tab-group=default class="tab-item active"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># shape.s(t) returns the vertices of shape</span>
</span></span><span style=display:flex><span><span style=color:#75715e># shape.s(t) is periodic with a period of 1</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>ProjectShapeOnAxis</span>(shape: Shape, axis: Vector, precision: int) <span style=color:#f92672>-&gt;</span> Range:
</span></span><span style=display:flex><span>    range <span style=color:#f92672>=</span> new Range()    
</span></span><span style=display:flex><span>    range<span style=color:#f92672>.</span>min <span style=color:#f92672>=</span> Math<span style=color:#f92672>.</span>max()
</span></span><span style=display:flex><span>    range<span style=color:#f92672>.</span>max <span style=color:#f92672>=</span> Math<span style=color:#f92672>.</span>min()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    step <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> precision
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span>  range(precision))
</span></span><span style=display:flex><span>        proj <span style=color:#f92672>=</span> ProjectPointOnAxis(shape<span style=color:#f92672>.</span>s(i<span style=color:#f92672>*</span>step), axis)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (proj <span style=color:#f92672>&lt;</span> range<span style=color:#f92672>.</span>min):
</span></span><span style=display:flex><span>            range<span style=color:#f92672>.</span>min <span style=color:#f92672>=</span> proj
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (proj <span style=color:#f92672>&gt;</span> range<span style=color:#f92672>.</span>max):
</span></span><span style=display:flex><span>            range<span style=color:#f92672>.</span>max <span style=color:#f92672>=</span> proj
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> range
</span></span></code></pre></div></div></div></div><h4 id=the-smarter-way>The smarter way
<a href=#the-smarter-way></a> <a id=chapter-1></a></h4><p>Being a convex shape, the same algorithm applied in the Dichotomy section can be used.<br>vertices[i] will be replaced by S(t).<br>Instead of adding 1 to the index, we will add a very small value to t.<br>Same for removing it.<br>We could also compute the derivative of P(t) to determine the direction, if possible.<br>Also, a maximum depth will be used instead of a precision to prevent infinite recursion.</p><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Info</div><div class=box-content><p>This method does not return the exact projection of the shape either.
However, the precision can be very accurate because of the depth we can easily increase thanks to the O(log(n)) complexity of the algorithm.</p></div></div><footer class=footline></footer></article></div></main></div><aside id=sidebar class=default-animation dir=ltr><div id=header-wrapper class=default-animation><div id=header class=default-animation><a id=logo href=../../../../index.html><img src=../../../../images/logo.png></img></a></div><form action=../../../../search.html method=get><div class="searchbox default-animation"><button type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=search-by>Search</label>
<input data-search-input id=search-by name=search-by class=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div></form><script>var contentLangs=["en"]</script><script src=../../../../js/auto-complete.js?1671583805 defer></script>
<script src=../../../../js/lunr.min.js?1671583805 defer></script>
<script src=../../../../js/lunr.stemmer.support.min.js?1671583805 defer></script>
<script src=../../../../js/lunr.multi.min.js?1671583805 defer></script>
<script src=../../../../js/lunr.en.min.js?1671583805 defer></script>
<script src=../../../../js/search.js?1671583805 defer></script></div><div id=content-wrapper class=highlightable><ul class=topics><li data-nav-id=/collisions/index.html class="dd-item parent"><a href=../../../../collisions/index.html><b>> </b>Collisions</a><ul id=subsections-70014d3b2a794cb433d7b3aec44d6a9a><li data-nav-id=/collisions/narrowphase/index.html class="dd-item parent alwaysopen"><a href=../../../../collisions/narrowphase/index.html><b>> </b>Narrow Phase</a><ul id=subsections-05eda7fb13db3e016b07064d47b82829><li data-nav-id=/collisions/narrowphase/sat/index.html class="dd-item parent alwaysopen"><a href=../../../../collisions/narrowphase/sat/index.html><b>> </b>SAT</a><ul id=subsections-37167b827368d397b4f255370fb87ad7><li data-nav-id=/collisions/narrowphase/sat/theory/index.html class=dd-item><a href=../../../../collisions/narrowphase/sat/theory/index.html><b>1. </b>Theory</a></li><li data-nav-id=/collisions/narrowphase/sat/inpractice/index.html class=dd-item><a href=../../../../collisions/narrowphase/sat/inpractice/index.html><b>2. </b>In practice</a></li><li data-nav-id=/collisions/narrowphase/sat/getprojectionaxes/index.html class=dd-item><a href=../../../../collisions/narrowphase/sat/getprojectionaxes/index.html><b>3. </b>Get Projection Axes</a></li><li data-nav-id=/collisions/narrowphase/sat/projectshapes/index.html class="dd-item active"><a href=../../../../collisions/narrowphase/sat/projectshapes/index.html><b>4. </b>Projecting Shapes</a></li><li data-nav-id=/collisions/narrowphase/sat/gettingoutputdata/index.html class=dd-item><a href=../../../../collisions/narrowphase/sat/gettingoutputdata/index.html><b>5. </b>Getting output data</a></li><li data-nav-id=/collisions/narrowphase/sat/precomputingdata/index.html class=dd-item><a href=../../../../collisions/narrowphase/sat/precomputingdata/index.html><b>6. </b>Precomputing data</a></li><li data-nav-id=/collisions/narrowphase/sat/isinside/index.html class=dd-item><a href=../../../../collisions/narrowphase/sat/isinside/index.html><b>7. </b>Is Inside</a></li><li data-nav-id=/collisions/narrowphase/sat/minkowskiandsat/index.html class=dd-item><a href=../../../../collisions/narrowphase/sat/minkowskiandsat/index.html><b>8. </b>Minkowski And SAT</a></li><li data-nav-id=/collisions/narrowphase/sat/minkoswkiandaxes/index.html class=dd-item><a href=../../../../collisions/narrowphase/sat/minkoswkiandaxes/index.html><b>9. </b>Minkowski And Axes</a></li></ul></li></ul></li><li data-nav-id=/collisions/response/index.html class="dd-item alwaysopen"><a href=../../../../collisions/response/index.html><b>> </b>Response</a><ul id=subsections-be2d29539182dfc622e793f0a410d7cd><li data-nav-id=/collisions/response/velocity/index.html class=dd-item><a href=../../../../collisions/response/velocity/index.html><b>3. </b>Velocity</a></li><li data-nav-id=/collisions/response/angularvelocity/index.html class=dd-item><a href=../../../../collisions/response/angularvelocity/index.html><b>4. </b>Angular Velocity</a></li><li data-nav-id=/collisions/response/correction/index.html class=dd-item><a href=../../../../collisions/response/correction/index.html><b>4. </b>Correction</a></li></ul></li></ul></li></ul><div id=shortcuts><div class=nav-title>More</div><ul><li><a class=padding href=../../../../tags/index.html><i class='fas fa-tags'></i> Tags</a></li></ul></div><div class="footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showLangSwitch showVariantSwitch showFooter"></div><hr class="default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showLangSwitch showVariantSwitch showFooter"><div id=prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks showLangSwitch showVariantSwitch"><ul><li id=select-language-container class="footerLangSwitch showLangSwitch"><div class="padding select-container"><i class="fas fa-language fa-fw"></i>
<span>&nbsp;</span><div class=select-style><label class=a11y-only for=select-language>Language</label>
<select id=select-language onchange="location=baseUri+this.value"><option lang=en id=en value=/collisions/narrowphase/sat/projectshapes/index.html selected>English</option></select></div><div class=select-clear></div></div></li><li id=select-variant-container class="footerVariantSwitch showVariantSwitch"><div class="padding select-container"><i class="fas fa-paint-brush fa-fw"></i>
<span>&nbsp;</span><div class=select-style><label class=a11y-only for=select-variant>Theme</label>
<select id=select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=light-theme value=light-theme selected>Light Theme</option><option id=dark-theme value=dark-theme>Dark Theme</option><option id=neon-theme value=neon-theme>Neon Theme</option></select></div><div class=select-clear></div></div><script>window.variants&&variants.markSelectedVariant()</script></li><li class=footerVisitedLinks><button class=padding onclick=clearHistory()><i class="fas fa-history fa-fw"></i> Clear History</button></li></ul></div><div id=footer class="footerFooter showFooter"><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></aside><script src=../../../../js/clipboard.min.js?1671583805 defer></script>
<script src=../../../../js/perfect-scrollbar.min.js?1671583805 defer></script>
<script src=../../../../js/featherlight.min.js?1671583805 defer></script>
<script src=../../../../js/theme.js?1671583805 defer></script></body></html>