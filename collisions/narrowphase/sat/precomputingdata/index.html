<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.108.0"><meta name=generator content="Relearn 5.8.1+tip"><meta name=description content><title>Precomputing data :: Documentation for Hugo Learn Theme</title><link href=../../../../collisions/narrowphase/sat/precomputingdata/index.xml rel=alternate type=application/rss+xml title="Precomputing data :: Documentation for Hugo Learn Theme"><link href=../../../../images/favicon.png?1671450550 rel=icon type=image/png><link href=../../../../css/fontawesome-all.min.css?1671450550 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../../css/fontawesome-all.min.css?1671450550 rel=stylesheet></noscript><link href=../../../../css/featherlight.min.css?1671450550 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../../css/featherlight.min.css?1671450550 rel=stylesheet></noscript><link href=../../../../css/auto-complete.css?1671450550 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../../css/auto-complete.css?1671450550 rel=stylesheet></noscript><link href=../../../../css/perfect-scrollbar.min.css?1671450550 rel=stylesheet><link href=../../../../css/nucleus.css?1671450550 rel=stylesheet><link href=../../../../css/fonts.css?1671450550 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../../css/fonts.css?1671450550 rel=stylesheet></noscript><link href=../../../../css/theme.css?1671450550 rel=stylesheet><link href=../../../../css/theme-light-theme.css?1671450550 rel=stylesheet id=variant-style><link href=../../../../css/ie.css?1671450550 rel=stylesheet><link href=../../../../css/variant.css?1671450550 rel=stylesheet><link href=../../../../css/print.css?1671450550 rel=stylesheet media=print><script src=../../../../js/url.js?1671450550></script>
<script src=../../../../js/variant.js?1671450550></script>
<script>window.index_json_url="../../../../index.json",window.index_js_url="../../../../index.search.js";var root_url="../../../../",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",window.T_No_results_found="No results found for \u0022{0}\u0022",window.T_N_results_found="{1} results found for \u0022{0}\u0022",baseUriFull="https://thomasprog.github.io/Algo-A-to-Z/",window.variants&&variants.init(["light-theme","dark-theme","neon-theme"])</script><script src=../../../../js/jquery.min.js?1671450550 defer></script></head><body class="mobile-support html" data-url=../../../../collisions/narrowphase/sat/precomputingdata/index.html><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable dir=ltr><div><div class=navigation><a class="nav nav-next" href=../../../../collisions/narrowphase/sat/isinside/index.html title="Is Inside (&#129106;)"><i class="fas fa-chevron-right fa-fw"></i></a></div><div class=navigation><a class="nav nav-prev" href=../../../../collisions/narrowphase/sat/gettingoutputdata/index.html title="Getting output data (&#129104;)"><i class="fas fa-chevron-left fa-fw"></i></a></div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a></span>
<span id=toc-menu title='Table of Contents (CTRL+ALT+t)'><i class="fas fa-list-alt fa-fw"></i></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../../collisions/narrowphase/sat/index.html><span itemprop=name>SAT</span></a><meta itemprop=position content="1">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Precomputing data</span><meta itemprop=position content="2"></li></ol></div><div class="default-animation progress"><div class=toc-wrapper dir=ltr><nav id=TableOfContents><ul><li><a href=#testing-the-same-shape-multiple-times>Testing the same shape multiple times</a></li><li><a href=#static-objects>Static Objects</a></li><li><a href=#caching-the-separating-axis>Caching the separating axis</a></li></ul></nav></div></div></div></nav><main id=body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><div id=head-tags></div><article class=default><h1 id=precomputing-data>Precomputing data</h1><h2 id=testing-the-same-shape-multiple-times>Testing the same shape multiple times
<a href=#testing-the-same-shape-multiple-times></a> <a id=chapter-1></a></h2><p>Let&rsquo;s supposed we test 1 shape with 10 other shapes.<br>Every time we will test a collision, we will project the 1st shape onto the axes.<br>However, half of the axes will stay the same, because half of the axes will be computed from that 1st shape.<br>That means we can precompute both the axes, but also the projections of the shape on half of the axes between the broadphase and the narrow phase.</p><div class="box notices cstyle warning"><div class=box-label><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div><div class=box-content><p>The previous algorithm would have returned as soon as it detects there are no collisions.
This means less data could have been computed.
By precomputing this data, we asssume shapes most likely collide to be efficient.
This is one of the reasons the broadphase is so important. Otherwise, it could end up taking more performance instead.</p></div></div><h2 id=static-objects>Static Objects
<a href=#static-objects></a> <a id=chapter-1></a></h2><p>When objects are moving, we have to compute axes in world space again every frame.<br>However, when objects are not moving (i.e. static), their world position do not change.<br>That means the following won&rsquo;t change:</p><ul><li>half of the axes</li><li>the projections of the shape on these axes</li></ul><p>We can cache that data.</p><p><div class="box notices cstyle warning"><div class=box-label><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div><div class=box-content><p>We have no idea when a collision would occur.
Precomputing everything would cost a lot of memory, for collisions that might never happen.</p></div></div><div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Tip</div><div class=box-content><p>To optimize that, we could use world partitioning and only load / compute this data when getting close to the associated object.</p></div></div></p><h2 id=caching-the-separating-axis>Caching the separating axis
<a href=#caching-the-separating-axis></a> <a id=chapter-1></a></h2><p>You can save the separating axis for a pair for the next frame.<br>That way, at the next frame, you can test if that separating axis is still valid, and potentially have O(1) complexity.</p><div class=tab-panel><div class=tab-nav><button data-tab-item=C++ data-tab-group=default class="tab-nav-button direction-ltr active" onclick='switchTab("default","C\u002b\u002b")'><span>C++</span></button></div><div class=tab-content><div data-tab-item=C++ data-tab-group=default class="tab-item active"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>bool</span> <span style=color:#a6e22e>TestCollisionsWithSATOnAxis</span>(<span style=color:#66d9ef>const</span> Shape<span style=color:#f92672>&amp;</span> shape1, <span style=color:#66d9ef>const</span> Shape<span style=color:#f92672>&amp;</span> shape2, <span style=color:#66d9ef>const</span> Axis<span style=color:#f92672>&amp;</span> axis)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    Range projection1 <span style=color:#f92672>=</span> shape1.ProjectOnAxis(axis);
</span></span><span style=display:flex><span>    Range projection2 <span style=color:#f92672>=</span> shape2.ProjectOnAxis(axis);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> DoRangesOverlap(projection1, projection2);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>NarrowPhaseBetween2Shapes</span>(CollisionPair<span style=color:#f92672>&amp;</span> collisionPair)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (collisionPair.lastSeparatingAxis <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nullptr</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>!</span>TestCollisionsWithSATOnAxis(collisionPair.shape1, collisionPair.shape2, lastSeparatingAxis))
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> false;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    TestCollisionsWithSAT(collisionPair.shape1, collisionPair.shape2, collisionPair.output)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></div></div><footer class=footline></footer></article></div></main></div><aside id=sidebar class=default-animation dir=ltr><div id=header-wrapper class=default-animation><div id=header class=default-animation><img src=../../../../images/logo.png></img></div><form action=../../../../search.html method=get><div class="searchbox default-animation"><button type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=search-by>Search</label>
<input data-search-input id=search-by name=search-by class=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div></form><script>var contentLangs=["en"]</script><script src=../../../../js/auto-complete.js?1671450550 defer></script>
<script src=../../../../js/lunr.min.js?1671450550 defer></script>
<script src=../../../../js/lunr.stemmer.support.min.js?1671450550 defer></script>
<script src=../../../../js/lunr.multi.min.js?1671450550 defer></script>
<script src=../../../../js/lunr.en.min.js?1671450550 defer></script>
<script src=../../../../js/search.js?1671450550 defer></script></div><div id=content-wrapper class=highlightable><ul class=topics><li data-nav-id=/collisions/index.html class="dd-item parent"><a href=../../../../collisions/index.html><b>> </b>Collisions</a><ul id=subsections-70014d3b2a794cb433d7b3aec44d6a9a><li data-nav-id=/collisions/narrowphase/index.html class="dd-item parent alwaysopen"><a href=../../../../collisions/narrowphase/index.html><b>> </b>Narrow Phase</a><ul id=subsections-05eda7fb13db3e016b07064d47b82829><li data-nav-id=/collisions/narrowphase/sat/index.html class="dd-item parent alwaysopen"><a href=../../../../collisions/narrowphase/sat/index.html><b>> </b>SAT</a><ul id=subsections-37167b827368d397b4f255370fb87ad7><li data-nav-id=/collisions/narrowphase/sat/theory/index.html class=dd-item><a href=../../../../collisions/narrowphase/sat/theory/index.html><b>1. </b>Theory</a></li><li data-nav-id=/collisions/narrowphase/sat/inpractice/index.html class=dd-item><a href=../../../../collisions/narrowphase/sat/inpractice/index.html><b>2. </b>In practice</a></li><li data-nav-id=/collisions/narrowphase/sat/getprojectionaxes/index.html class=dd-item><a href=../../../../collisions/narrowphase/sat/getprojectionaxes/index.html><b>3. </b>Get Projection Axes</a></li><li data-nav-id=/collisions/narrowphase/sat/projectshapes/index.html class=dd-item><a href=../../../../collisions/narrowphase/sat/projectshapes/index.html><b>4. </b>Projecting Shapes</a></li><li data-nav-id=/collisions/narrowphase/sat/gettingoutputdata/index.html class=dd-item><a href=../../../../collisions/narrowphase/sat/gettingoutputdata/index.html><b>5. </b>Getting output data</a></li><li data-nav-id=/collisions/narrowphase/sat/precomputingdata/index.html class="dd-item active"><a href=../../../../collisions/narrowphase/sat/precomputingdata/index.html><b>6. </b>Precomputing data</a></li><li data-nav-id=/collisions/narrowphase/sat/isinside/index.html class=dd-item><a href=../../../../collisions/narrowphase/sat/isinside/index.html><b>7. </b>Is Inside</a></li></ul></li></ul></li></ul></li></ul><div id=shortcuts><div class=nav-title>More</div><ul><li><a class=padding href=../../../../tags/index.html><i class='fas fa-tags'></i> Tags</a></li></ul></div><div class="footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showLangSwitch showVariantSwitch showFooter"></div><hr class="default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showLangSwitch showVariantSwitch showFooter"><div id=prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks showLangSwitch showVariantSwitch"><ul><li id=select-language-container class="footerLangSwitch showLangSwitch"><div class="padding select-container"><i class="fas fa-language fa-fw"></i>
<span>&nbsp;</span><div class=select-style><label class=a11y-only for=select-language>Language</label>
<select id=select-language onchange="location=baseUri+this.value"><option lang=en id=en value=/collisions/narrowphase/sat/precomputingdata/index.html selected>English</option></select></div><div class=select-clear></div></div></li><li id=select-variant-container class="footerVariantSwitch showVariantSwitch"><div class="padding select-container"><i class="fas fa-paint-brush fa-fw"></i>
<span>&nbsp;</span><div class=select-style><label class=a11y-only for=select-variant>Theme</label>
<select id=select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=light-theme value=light-theme selected>Light Theme</option><option id=dark-theme value=dark-theme>Dark Theme</option><option id=neon-theme value=neon-theme>Neon Theme</option></select></div><div class=select-clear></div></div><script>window.variants&&variants.markSelectedVariant()</script></li><li class=footerVisitedLinks><button class=padding onclick=clearHistory()><i class="fas fa-history fa-fw"></i> Clear History</button></li></ul></div><div id=footer class="footerFooter showFooter"><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></aside><script src=../../../../js/clipboard.min.js?1671450550 defer></script>
<script src=../../../../js/perfect-scrollbar.min.js?1671450550 defer></script>
<script src=../../../../js/featherlight.min.js?1671450550 defer></script>
<script src=../../../../js/theme.js?1671450550 defer></script></body></html>